Index: app/src/main/java/com/example/e_debt_book/addCustomerFromMarket.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.e_debt_book;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.e_debt_book.model.Customer;\r\nimport com.example.e_debt_book.model.Market;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\npublic class addCustomerFromMarket extends AppCompatActivity {\r\n    //Sign up attributes\r\n    EditText customerRegisterNamefromMarket, customerRegisterLastNamefromMarket, customerRegisterPhonefromMarket, customerRegisterEmailfromMarket;\r\n    Button customerRegisterBackButtonfromMarket, customerRegisterSignUpButtomfromMarket;\r\n    ProgressBar customerRegisterProgressBarfromMarket;// not functional\r\n    ConstraintLayout customerRegisterfromMarket;\r\n\r\n\r\n    //Firebase attributes\r\n    FirebaseAuth fAuth;\r\n    FirebaseDatabase firebaseDatabase;\r\n    DatabaseReference mRootRef,conditionRef;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_add_customer_from_market);\r\n\r\n        //Sign up attributes\r\n        customerRegisterNamefromMarket = findViewById(R.id.customerRegisterNamefromMarket);\r\n        customerRegisterLastNamefromMarket = findViewById(R.id.customerRegisterLastNamefromMarket);\r\n        customerRegisterPhonefromMarket = findViewById(R.id.customerRegisterPhonefromMarket);\r\n        customerRegisterEmailfromMarket = findViewById(R.id.customerRegisterEmailfromMarket);\r\n        customerRegisterBackButtonfromMarket = findViewById(R.id.customerRegisterBackButtonfromMarket);\r\n        customerRegisterSignUpButtomfromMarket = findViewById(R.id.customerRegisterSignUpButtomfromMarket);\r\n        customerRegisterfromMarket = findViewById(R.id.customerRegisterfromMarket);\r\n\r\n        fAuth = FirebaseAuth.getInstance();\r\n\r\n        Market market = (Market) getIntent().getSerializableExtra(\"Market\");\r\n\r\n\r\n        //ask bilal\r\n        mRootRef = FirebaseDatabase.getInstance().getReference();\r\n        // not functional\r\n        customerRegisterProgressBarfromMarket = findViewById(R.id.customerRegisterProgressBarfromMarket);\r\n\r\n        customerRegisterBackButtonfromMarket.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent i = new Intent(addCustomerFromMarket.this,MarketMain.class);\r\n                Bundle b = new Bundle();\r\n                b.putSerializable(\"Market\",market);\r\n                i.putExtras(b);\r\n                startActivity(i);\r\n                finish();\r\n            }\r\n        });\r\n\r\n        customerRegisterSignUpButtomfromMarket.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String email = customerRegisterEmailfromMarket.getText().toString().trim();\r\n                String phone = customerRegisterPhonefromMarket.getText().toString().trim();\r\n                if(TextUtils.isEmpty(email)){\r\n                    customerRegisterEmailfromMarket.setError(\"Email is Required.\");\r\n                    return;\r\n                }\r\n                if(TextUtils.isEmpty(phone)){\r\n                    customerRegisterPhonefromMarket.setError(\"Please Entere the Phone Number\");\r\n                    return;\r\n                }\r\n                customerRegisterProgressBarfromMarket.setVisibility(View.VISIBLE);\r\n                ////Creating the Customer\r\n                conditionRef = mRootRef.child(\"Unregisterd_Customers\");\r\n                Customer cos = new Customer(customerRegisterNamefromMarket.getText().toString(),\r\n                        customerRegisterLastNamefromMarket.getText().toString(),\r\n                        customerRegisterEmailfromMarket.getText().toString(),0);\r\n                //set the phone number as Null cause its already the key of the customer in the database\r\n                //so we dont wanna add it in the database and make it key and cutomer attribute at the same time\r\n                cos.setPhone(null);\r\n                //check : first, if there's an unregistered customer with the same number,\r\n                //second, if there's a registered customer with the same number, if not, then create an unregistered customer.\r\n                conditionRef.child(phone).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(DataSnapshot snapshot) {\r\n                        if (snapshot.getValue() != null) {\r\n                            //phone exists as an unregistered customer! , show the user that in a toast\r\n                            Toast.makeText(addCustomerFromMarket.this, \"This Phone Number is already used\", Toast.LENGTH_SHORT).show();\r\n                            System.out.println(\"phone exists!\");\r\n                        } else {\r\n                            //check if the phone's already used as a customer!\r\n                            DatabaseReference databaseReference =mRootRef.child(\"Customers\");\r\n                            databaseReference.child(phone).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                    if (snapshot.getValue()!=null){\r\n                                        //phone exists, show the user that in toast\r\n                                        Toast.makeText(addCustomerFromMarket.this, \"This Phone Number is already used\", Toast.LENGTH_SHORT).show();\r\n                                        System.out.println(\"phone exists!\");\r\n                                    }\r\n                                    else{\r\n                                        //phone is available, start the registeration operation\r\n                                        //Adding the customer to the database\r\n                                        conditionRef.child(customerRegisterPhonefromMarket.getText().toString()).setValue(cos);\r\n                                        Intent i = new Intent(addCustomerFromMarket.this,MarketMain.class);\r\n                                        Bundle b = new Bundle();\r\n                                        b.putSerializable(\"Market\",market);\r\n                                        i.putExtras(b);\r\n                                        startActivity(i);\r\n                                        finish();\r\n                                    }\r\n                                }\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {}\r\n                            });\r\n                        }\r\n                    }\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {}\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/e_debt_book/addCustomerFromMarket.java	(revision 40df123fd400310f0d9096d7356dab94f1ad66ea)
+++ app/src/main/java/com/example/e_debt_book/addCustomerFromMarket.java	(date 1609000347966)
@@ -32,7 +32,6 @@
     ProgressBar customerRegisterProgressBarfromMarket;// not functional
     ConstraintLayout customerRegisterfromMarket;
 
-
     //Firebase attributes
     FirebaseAuth fAuth;
     FirebaseDatabase firebaseDatabase;
@@ -56,7 +55,6 @@
 
         Market market = (Market) getIntent().getSerializableExtra("Market");
 
-
         //ask bilal
         mRootRef = FirebaseDatabase.getInstance().getReference();
         // not functional
@@ -107,7 +105,7 @@
                             System.out.println("phone exists!");
                         } else {
                             //check if the phone's already used as a customer!
-                            DatabaseReference databaseReference =mRootRef.child("Customers");
+                            DatabaseReference databaseReference = mRootRef.child("Customers");
                             databaseReference.child(phone).addListenerForSingleValueEvent(new ValueEventListener() {
                                 @Override
                                 public void onDataChange(@NonNull DataSnapshot snapshot) {
