Index: app/src/main/java/com/example/e_debt_book/NumberVerification.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.e_debt_book;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.constraintlayout.widget.ConstraintLayout;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.e_debt_book.model.Customer;\r\nimport com.example.e_debt_book.model.Market;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.FirebaseException;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseAuthInvalidCredentialsException;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.PhoneAuthCredential;\r\nimport com.google.firebase.auth.PhoneAuthOptions;\r\nimport com.google.firebase.auth.PhoneAuthProvider;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class NumberVerification extends AppCompatActivity {\r\n\r\n\r\n    private TextView textView,verificationPhone;\r\n    private EditText verificationNumber;\r\n    private Button verificationLaterButton,verificationButtom,sendCodeButton;\r\n    private ConstraintLayout numberVerificiation;\r\n    private FirebaseAuth mAuth ;\r\n    private PhoneAuthProvider.OnVerificationStateChangedCallbacks callbacks;\r\n    private String mVerificationId;\r\n    private PhoneAuthProvider.ForceResendingToken mResendToken;\r\n    private ProgressBar verificationProgressBar;\r\n    DatabaseReference mRootRef,conditionRef;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_number_verification);\r\n        mRootRef = FirebaseDatabase.getInstance().getReference();\r\n\r\n\r\n\r\n\r\n\r\n        //// Number verification attributes\r\n        textView = findViewById(R.id.textView);\r\n        verificationNumber = findViewById(R.id.verificationNumber);\r\n        verificationLaterButton = findViewById(R.id.verificationLaterButton);\r\n        verificationButtom = findViewById(R.id.verificationButtom);\r\n        numberVerificiation = findViewById(R.id.numberVerificiation);\r\n        sendCodeButton = findViewById(R.id.sendCodeButton);\r\n        verificationProgressBar = findViewById(R.id.verificationProgressBar);\r\n\r\n        verificationPhone = findViewById(R.id.verificationPhone);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        mAuth.useAppLanguage();\r\n\r\n        verificationLaterButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if(MainActivity.usertype == 0){\r\n                    Customer customer = (Customer) getIntent().getSerializableExtra(\"Customer\");\r\n                    Intent i = new Intent(NumberVerification.this, CustomerMain.class);\r\n                    Bundle b = new Bundle();\r\n                    b.putSerializable(\"Customer\",customer);\r\n                    i.putExtras(b);\r\n                    startActivity(i);\r\n                    finish();\r\n                }else{\r\n                    Market market = (Market) getIntent().getSerializableExtra(\"Market\");\r\n                    System.out.println(market.getEmail());\r\n                    Intent i = new Intent(NumberVerification.this, MarketMain.class);\r\n                    Bundle b = new Bundle();\r\n                    b.putSerializable(\"Market\",market);\r\n                    i.putExtras(b);\r\n                    startActivity(i);\r\n                    finish();\r\n                }\r\n            }\r\n        });\r\n\r\n        if(MainActivity.usertype==0){\r\n            conditionRef = mRootRef.child(\"Customers\");\r\n            Customer customer = (Customer) getIntent().getSerializableExtra(\"Customer\");\r\n            String phone = \"+90\" + customer.getPhone();\r\n            verificationPhone.setText(phone);\r\n\r\n\r\n            verificationButtom.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String vcode = verificationNumber.getText().toString();\r\n                    if (TextUtils.isEmpty(vcode)){\r\n                        Toast.makeText(NumberVerification.this, \"Please Entere your code\", Toast.LENGTH_SHORT).show();\r\n                    }else {\r\n                        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, vcode);\r\n                        signInWithPhoneAuthCredential(credential , customer,null,0);\r\n\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            sendCodeButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    verificationProgressBar.setVisibility(View.VISIBLE);\r\n                    sendCodeButton.setVisibility(View.GONE);\r\n                    PhoneAuthOptions options =\r\n                            PhoneAuthOptions.newBuilder(mAuth)\r\n                                    .setPhoneNumber(phone)       // Phone number to verify\r\n                                    .setTimeout(120L, TimeUnit.SECONDS) // Timeout and unit\r\n                                    .setActivity(NumberVerification.this)                 // Activity (for callback binding)\r\n                                    .setCallbacks(callbacks)          // OnVerificationStateChangedCallbacks\r\n                                    .build();\r\n                    PhoneAuthProvider.verifyPhoneNumber(options);\r\n                }\r\n            });\r\n            callbacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n                @Override\r\n                public void onVerificationCompleted(@NonNull PhoneAuthCredential phoneAuthCredential) {\r\n\r\n                    signInWithPhoneAuthCredential(phoneAuthCredential , customer,null,0);\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onVerificationFailed(@NonNull FirebaseException e) {\r\n                    Toast.makeText(NumberVerification.this, \"The Number Couldnt be verified Try again please ..\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                @Override\r\n                public void onCodeSent(@NonNull String verificationId,\r\n                                       @NonNull PhoneAuthProvider.ForceResendingToken token) {\r\n                    // Save verification ID and resending token so we can use them later\r\n                    mVerificationId = verificationId;\r\n                    mResendToken = token;\r\n                    Toast.makeText(NumberVerification.this, \"Code has been sent ,check your messages please\", Toast.LENGTH_SHORT).show();\r\n                    verificationProgressBar.setVisibility(View.INVISIBLE);\r\n                }\r\n            };\r\n\r\n        }else{\r\n\r\n            conditionRef = mRootRef.child(\"Markets\");\r\n            Market market = (Market) getIntent().getSerializableExtra(\"Market\");\r\n            String phone = \"+90\" + market.getPhone();\r\n            verificationPhone.setText(phone);\r\n\r\n\r\n            verificationButtom.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String vcode = verificationNumber.getText().toString();\r\n                    if (TextUtils.isEmpty(vcode)){\r\n                        Toast.makeText(NumberVerification.this, \"Please Entere your code\", Toast.LENGTH_SHORT).show();\r\n                    }else {\r\n                        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(mVerificationId, vcode);\r\n                        signInWithPhoneAuthCredential(credential , null,market,1);\r\n\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            sendCodeButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    verificationProgressBar.setVisibility(View.VISIBLE);\r\n                    sendCodeButton.setVisibility(View.GONE);\r\n                    PhoneAuthOptions options =\r\n                            PhoneAuthOptions.newBuilder(mAuth)\r\n                                    .setPhoneNumber(phone)       // Phone number to verify\r\n                                    .setTimeout(120L, TimeUnit.SECONDS) // Timeout and unit\r\n                                    .setActivity(NumberVerification.this)                 // Activity (for callback binding)\r\n                                    .setCallbacks(callbacks)          // OnVerificationStateChangedCallbacks\r\n                                    .build();\r\n                    PhoneAuthProvider.verifyPhoneNumber(options);\r\n                }\r\n            });\r\n            callbacks = new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n                @Override\r\n                public void onVerificationCompleted(@NonNull PhoneAuthCredential phoneAuthCredential) {\r\n\r\n                    signInWithPhoneAuthCredential(phoneAuthCredential , null,market,1);\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onVerificationFailed(@NonNull FirebaseException e) {\r\n                    Toast.makeText(NumberVerification.this, \"The Number Couldnt be verified Try again please ..\", Toast.LENGTH_SHORT).show();\r\n                }\r\n                @Override\r\n                public void onCodeSent(@NonNull String verificationId,\r\n                                       @NonNull PhoneAuthProvider.ForceResendingToken token) {\r\n                    // Save verification ID and resending token so we can use them later\r\n                    mVerificationId = verificationId;\r\n                    mResendToken = token;\r\n                    Toast.makeText(NumberVerification.this, \"Code has been sent ,check your messages please\", Toast.LENGTH_SHORT).show();\r\n                    verificationProgressBar.setVisibility(View.INVISIBLE);\r\n                }\r\n            };\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private void signInWithPhoneAuthCredential(PhoneAuthCredential credential, Customer customer,Market market,int type) {\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (type == 0){\r\n                            if (task.isSuccessful()) {\r\n                                customer.setStatus(1);\r\n                                conditionRef.child(customer.getPhone()).child(\"status\").setValue(customer.getStatus());\r\n\r\n                                FirebaseUser user = task.getResult().getUser();Toast.makeText(NumberVerification.this, \"Done\", Toast.LENGTH_SHORT).show();\r\n\r\n                                Intent i = new Intent(NumberVerification.this, CustomerMain.class);\r\n                                Bundle b = new Bundle();\r\n                                b.putSerializable(\"Customer\",customer);\r\n                                i.putExtras(b);\r\n                                startActivity(i);\r\n                                finish();\r\n\r\n\r\n                                // ...\r\n                            } else {\r\n                                // Sign in failed, display a message and update the UI\r\n                                if (task.getException() instanceof FirebaseAuthInvalidCredentialsException) {\r\n                                    // The verification code entered was invalid\r\n\r\n                                    String message = task.getException().toString();\r\n                                    Toast.makeText(NumberVerification.this, \"Error : \" + message, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        }else{\r\n                            if (task.isSuccessful()) {\r\n                                market.setStatus(1);\r\n                                conditionRef.child(market.getPhone()).child(\"status\").setValue(market.getStatus());\r\n\r\n                                FirebaseUser user = task.getResult().getUser();Toast.makeText(NumberVerification.this, \"Done\", Toast.LENGTH_SHORT).show();\r\n\r\n                                Intent i = new Intent(NumberVerification.this, MarketMain.class);\r\n                                Bundle b = new Bundle();\r\n                                b.putSerializable(\"Market\",market);\r\n                                i.putExtras(b);\r\n                                System.out.println(\"///////////////////////////////////////////////////////////////////\");\r\n                                System.out.println(market.getAdress()+market.getEmail());\r\n                                System.out.println(\"///////////////////////////////////////////////////////////////////\");\r\n                                startActivity(i);\r\n                                finish();\r\n\r\n                                // ...\r\n                            } else {\r\n                                // Sign in failed, display a message and update the UI\r\n                                if (task.getException() instanceof FirebaseAuthInvalidCredentialsException) {\r\n                                    // The verification code entered was invalid\r\n\r\n                                    String message = task.getException().toString();\r\n                                    Toast.makeText(NumberVerification.this, \"Error : \" + message, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/e_debt_book/NumberVerification.java	(revision 27955b54e7af9ec962649ef096a2116f41dfbec2)
+++ app/src/main/java/com/example/e_debt_book/NumberVerification.java	(date 1608747804830)
@@ -54,9 +54,6 @@
         mRootRef = FirebaseDatabase.getInstance().getReference();
 
 
-
-
-
         //// Number verification attributes
         textView = findViewById(R.id.textView);
         verificationNumber = findViewById(R.id.verificationNumber);
@@ -95,7 +92,7 @@
             }
         });
 
-        if(MainActivity.usertype==0){
+        if(MainActivity.usertype == 0){
             conditionRef = mRootRef.child("Customers");
             Customer customer = (Customer) getIntent().getSerializableExtra("Customer");
             String phone = "+90" + customer.getPhone();
Index: app/src/main/java/com/example/e_debt_book/EditMarketInfo.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.e_debt_book;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\n\r\nimport com.example.e_debt_book.model.Market;\r\n\r\npublic class EditMarketInfo extends AppCompatActivity {\r\n\r\n    EditText editInfoName , editInfoEmail , editInfoPhone , editInfoPassword, editInfoIban , editInfoAdress;\r\n    Button marketeditBackButton2, marketeditDoneButton2;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_market_info);\r\n\r\n        Market market = (Market) getIntent().getSerializableExtra(\"Market\");\r\n\r\n\r\n        marketeditBackButton2 = findViewById(R.id.marketeditBackButton2);\r\n        marketeditDoneButton2 = findViewById(R.id.marketeditDoneButton2);\r\n        editInfoName = findViewById(R.id.editInfoName);\r\n        editInfoEmail = findViewById(R.id.editInfoEmail);\r\n        editInfoPhone = findViewById(R.id.editInfoPhone);\r\n        editInfoPassword = findViewById(R.id.editInfoPassword);\r\n        editInfoIban = findViewById(R.id.editInfoIban);\r\n        editInfoAdress = findViewById(R.id.editInfoAdress);\r\n\r\n\r\n\r\n\r\n\r\n\r\n        marketeditBackButton2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                editInfoName.setText(market.getName());\r\n                editInfoEmail.setText(market.getEmail());\r\n                editInfoPhone.setText(market.getPhone());\r\n                editInfoPassword.setText(market.getPassword());\r\n                editInfoIban.setText(market.getIban());\r\n                editInfoAdress.setText(market.getAdress());\r\n\r\n            }\r\n        });\r\n        marketeditDoneButton2.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/e_debt_book/EditMarketInfo.java	(revision 27955b54e7af9ec962649ef096a2116f41dfbec2)
+++ app/src/main/java/com/example/e_debt_book/EditMarketInfo.java	(date 1608800944402)
@@ -32,20 +32,20 @@
         editInfoAdress = findViewById(R.id.editInfoAdress);
 
 
-
-
-
-
-        marketeditBackButton2.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View view) {
-                editInfoName.setText(market.getName());
-                editInfoEmail.setText(market.getEmail());
-                editInfoPhone.setText(market.getPhone());
-                editInfoPassword.setText(market.getPassword());
-                editInfoIban.setText(market.getIban());
-                editInfoAdress.setText(market.getAdress());
+        editInfoName.setText(market.getName());
+        editInfoEmail.setText(market.getEmail());
+        editInfoPhone.setText(market.getPhone());
+        editInfoPassword.setText(market.getPassword());
+        editInfoIban.setText(market.getIban());
+        editInfoAdress.setText(market.getAdress());
 
+
+
+
+        marketeditBackButton2.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View view) {
+
             }
         });
         marketeditDoneButton2.setOnClickListener(new View.OnClickListener() {
